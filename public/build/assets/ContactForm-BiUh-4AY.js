import{j as e}from"./FileViewer-CpM0iYLI.js";import{r as n}from"./index-B80Lgev0.js";import{M as g}from"./MessagesRest-6a4rHQg0.js";import{S as v}from"./sweetalert2.all-Dh0rZL5X.js";import"./ModalAppointment-D7vfeYVN.js";import{u as N}from"./useTranslation-BvL_iu_4.js";import{C as w}from"./chevron-down-CyYB_9vX.js";const y=new g,C=({onPhoneChange:h})=>{const[x,c]=n.useState([]),[r,t]=n.useState(null),[m,d]=n.useState(""),[l,i]=n.useState(!1),u=n.useRef(null);n.useEffect(()=>{(async()=>{try{const p=await(await fetch("/assets/data/countries_phone.json")).json();c(p);const b=p.find(j=>j.iso2==="PE");t(b||p[0])}catch(a){console.error("Error loading countries:",a)}})()},[]),n.useEffect(()=>{const s=a=>{u.current&&!u.current.contains(a.target)&&i(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]);const o=s=>{const a=s.target.value.replace(/\D/g,"");if(d(a),r){const p=`+${r.phoneCode.replace(/\D/g,"")}${a}`;h(p)}},f=s=>{t(s),i(!1)};return e.jsxs("div",{className:"relative w-full",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Teléfono*"}),e.jsxs("div",{className:"flex border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-500",children:[e.jsxs("div",{className:"relative",ref:u,children:[e.jsxs("button",{type:"button",className:"flex items-center justify-between px-3 py-2 h-full border-r border-gray-300 bg-gray-50 rounded-l-md w-20",onClick:()=>i(!l),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:`fi fi-${r==null?void 0:r.iso2.toLowerCase()} mr-2`}),e.jsx("span",{children:r==null?void 0:r.iso2})]}),e.jsx(w,{className:`h-4 w-4 transition-transform ${l?"rotate-180":""}`})]}),l&&e.jsx("div",{className:"absolute z-10 mt-1 w-64 bg-white shadow-lg rounded-md py-1 max-h-60 overflow-auto border border-gray-200",children:x.map(s=>e.jsxs("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer flex items-center",onClick:()=>f(s),children:[e.jsx("span",{className:`fi fi-${s.iso2.toLowerCase()} mr-3`}),e.jsx("span",{className:"flex-1",children:s.nameES}),e.jsxs("span",{className:"text-gray-500",children:["+",s.phoneCode]})]},s.iso2))})]}),e.jsx("input",{type:"tel",value:m,onChange:o,placeholder:"Ej: 987654321",className:"flex-1 px-4 py-2 focus:outline-none rounded-r-md",pattern:"[0-9]*"})]}),m&&r&&e.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Número completo: +",r.phoneCode," ",m]})]})},$=({})=>{const[h,x]=n.useState({phone:""}),c=n.useRef(),r=n.useRef(),t=n.useRef(),m=n.useRef(),d=n.useRef(),[l,i]=n.useState(!1),u=async f=>{f.preventDefault(),i(!0);const s={name:c.current.value+" "+r.current.value,email:t.current.value,subject:h.phone,description:d.current.value},a=await y.save(s);i(!1),window.location.href="/thanks",a&&(v.fire({icon:"success",title:"Mensaje enviado",text:"Tu mensaje ha sido enviado correctamente. ¡Nos pondremos en contacto contigo pronto!",showConfirmButton:!1,timer:3e3}),c.current.value=null,r.current.value=null,t.current.value=null,m.current.value=null,d.current.value=null,x({phone:""}))},{t:o}=N();return e.jsxs("form",{className:"flex flex-col gap-y-6",onSubmit:u,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nombre",className:"block text-sm font-medium  mb-1",children:o("public.form.name","Nombre")}),e.jsx("input",{ref:c,type:"text",id:"nombre",placeholder:o("public.form.name","Nombre"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("div",{className:"",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"apellido-materno",className:"block text-sm font-medium  mb-1",children:o("public.form.lastname","Apelldios")}),e.jsx("input",{ref:r,type:"text",id:"apellido-materno",placeholder:o("public.form.lastname","Apelldios"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium  mb-1",children:o("public.form.email","E-mail")}),e.jsx("input",{ref:t,type:"email",id:"email",placeholder:o("public.form.email","E-mail"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("div",{children:e.jsx(C,{onPhoneChange:f=>x({...h,phone:f})})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium  mb-1",children:o("public.form.message","Escribe un mensaje")}),e.jsx("textarea",{ref:d,id:"mensaje",rows:6,placeholder:o("public.form.message","Escribe un mensaje"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex items-center h-5",children:e.jsx("input",{id:"privacidad",type:"checkbox",className:"h-4 w-4 text-azul border-gray-300 rounded focus:ring-azul/50"})}),e.jsx("div",{className:"ml-3 text-sm",children:e.jsx("label",{htmlFor:"privacidad",className:"",children:o("public.form.privacy","Usted acepta nuestra amigable política de privacidad.")})})]}),e.jsxs("button",{disabled:l,type:"submit",className:" mt-5 bg-[#224483] font-semibold w-8/12 lg:w-3/6 text-white py-1 pl-1 pr-3  gap-2 rounded-full flex items-center lg:h-14",children:[e.jsx("div",{className:"bg-[#EFF0F1] w-12 p-2 rounded-full",children:e.jsx("img",{src:"/assets/img/icons/send.png",className:" h-auto"})}),l?e.jsxs("p",{children:[" ",o("public.btn.sending","Enviando formulario...")]}):e.jsx("p",{className:"ml-4",children:o("public.btn.send_form","Enviar formulario")})]})]})};export{$ as C};
