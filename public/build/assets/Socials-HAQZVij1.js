var N=Object.defineProperty;var C=(t,o,r)=>o in t?N(t,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[o]=r;var R=(t,o,r)=>(C(t,typeof o!="symbol"?o+"":o,r),r);import{j as i}from"./FileViewer-DkaHswXt.js";import{B as E}from"./Base-BYX3oziu.js";import{I as B}from"./InputFormGroup-DDhzlCe_.js";import{S as D}from"./SelectFormGroup-DYWvpzd2.js";import{S as y}from"./SwitchFormGroup-COj39dTx.js";import{T as G}from"./TextareaFormGroup-BncP5wW3.js";import{r as a}from"./TrackingPixels-B80Lgev0.js";import{c as I}from"./ReactAppend-CY8yKZvG.js";import{r as g}from"./DxBox-C52wWe69.js";import{S as v}from"./sweetalert2.all-C96erxsa.js";import{B as q}from"./Results-D258VEiO.js";import{M as A}from"./Modal-CJBbhQ-7.js";import{T as M}from"./Table-ux6p-2ih.js";import{D as S}from"./DxButton-CsjWvhyj.js";import{C as P}from"./CreateReactScript-BEktg6JA.js";import{R as z}from"./ReactAppend-Yu2UtNlL.js";import{F as L,a as U,b as V,c as W,d as Y,e as O,f as X,g as H,h as J,i as K,j as Q,k as Z}from"./index-DJI-j85T.js";import"./tippy-react.esm-CIcmk6y-.js";import"./index-CbrplguO.js";/* empty css              */import"./Logout-CHcSRTk-.js";import"./main-D1ujSG59.js";import"./___vite-browser-external_commonjs-proxy-DjIx6Adb.js";import"./index.esm-Duzu12F9.js";import"./axios-B4uVmeYG.js";import"./useTranslation-BOupZ7-X.js";import"./Filter-BZ5YA63n.js";/* empty css               */class _ extends q{constructor(){super(...arguments);R(this,"path","admin/socials")}}const m=new _,d=[{id:"facebook",name:"Facebook",icon:L,iconRef:"fab fa-facebook"},{id:"instagram",name:"Instagram",icon:U,iconRef:"fab fa-instagram"},{id:"twitter",name:"Twitter/X",icon:V,iconRef:"fab fa-twitter"},{id:"linkedin",name:"LinkedIn",icon:W,iconRef:"fab fa-linkedin"},{id:"youtube",name:"YouTube",icon:Y,iconRef:"fab fa-youtube"},{id:"tiktok",name:"TikTok",icon:O,iconRef:"fab fa-tiktok"},{id:"whatsapp",name:"WhatsApp",icon:X,iconRef:"fab fa-whatsapp"},{id:"telegram",name:"Telegram",icon:H,iconRef:"fab fa-telegram"},{id:"discord",name:"Discord",icon:J,iconRef:"fab fa-discord"},{id:"snapchat",name:"Snapchat",icon:K,iconRef:"fab fa-snapchat"},{id:"pinterest",name:"Pinterest",icon:Q,iconRef:"fab fa-pinterest"},{id:"reddit",name:"Reddit",icon:Z,iconRef:"fab fa-reddit"}],ee=({})=>{const t=a.useRef(),o=a.useRef(),r=a.useRef(),c=a.useRef(),u=a.useRef(),p=a.useRef(),[j,b]=a.useState(!1),[l,h]=a.useState(null),k=e=>{const n=d.find(s=>s.id===e);h(n)};a.useEffect(()=>{const e=()=>{c.current&&$(c.current).on("change",function(){const n=$(this).val();k(n)})};return $(o.current).on("shown.bs.modal",e),()=>{c.current&&$(c.current).off("change"),$(o.current).off("shown.bs.modal",e)}},[]);const x=e=>{e!=null&&e.id?b(!0):b(!1),r.current.value=(e==null?void 0:e.id)??"",u.current.value=(e==null?void 0:e.name)??"",p.current.value=(e==null?void 0:e.link)??"";const n=d.find(s=>s.name===(e==null?void 0:e.description)||s.iconRef===(e==null?void 0:e.icon));n?(h(n),setTimeout(()=>{$(c.current).val(n.id).trigger("change")},100)):(h(null),setTimeout(()=>{$(c.current).val("").trigger("change")},100)),$(o.current).modal("show")},F=async e=>{if(e.preventDefault(),!l){v.fire("Error","Por favor selecciona una red social","error");return}const n={id:r.current.value||void 0,icon:l.iconRef,name:u.current.value,description:l.name,link:p.current.value};await m.save(n)&&($(t.current).dxDataGrid("instance").refresh(),$(o.current).modal("hide"))},w=async({id:e,value:n})=>{await m.boolean({id:e,field:"visible",value:n})&&$(t.current).dxDataGrid("instance").refresh()},T=async e=>{const{isConfirmed:n}=await v.fire({title:"Eliminar registro",text:"Â¿Estas seguro de eliminar este registro?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});!n||!await m.delete(e)||$(t.current).dxDataGrid("instance").refresh()};return i.jsxs(i.Fragment,{children:[i.jsx(M,{gridRef:t,title:"Redes Sociales",rest:m,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(t.current).dxDataGrid("instance").refresh()}}),e.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Nuevo registro",hint:"Nuevo registro",onClick:()=>x()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"name",caption:"Usuario"},{dataField:"description",caption:"Red Social",cellTemplate:(e,{data:n})=>{const s=d.find(f=>f.name===n.description||f.iconRef===n.icon);if(s){const f=s.icon;e.html(g(i.jsxs("span",{className:"d-flex align-items-center",children:[i.jsx(f,{className:"me-2",size:16}),n.description]})))}else e.html(g(i.jsxs(i.Fragment,{children:[i.jsx("i",{className:`fab ${n.icon} me-1`}),n.description]})))}},{dataField:"link",caption:"Link"},{dataField:"visible",caption:"Visible",dataType:"boolean",cellTemplate:(e,{data:n})=>{$(e).empty(),z(e,i.jsx(y,{checked:n.visible==1,onChange:()=>w({id:n.id,value:!n.visible})}))}},{caption:"Acciones",cellTemplate:(e,{data:n})=>{e.css("text-overflow","unset"),e.append(S({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>x(n)})),e.append(S({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>T(n.id)}))},allowFiltering:!1,allowExporting:!1}]}),i.jsx(A,{modalRef:o,title:j?"Editar red social":"Agregar red social",onSubmit:F,size:"md",children:i.jsxs("div",{className:"row",id:"socials-container",children:[i.jsx("input",{ref:r,type:"hidden"}),i.jsxs("div",{className:"col-12 mb-3",children:[i.jsxs("label",{className:"form-label",children:["Red Social ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsxs(D,{eRef:c,dropdownParent:"#socials-container",required:!0,children:[i.jsx("option",{value:"",children:"Seleccionar red social..."}),d.map(e=>i.jsx("option",{value:e.id,children:e.name},e.id))]})]}),l&&i.jsx("div",{className:"col-12 mb-3",children:i.jsxs("div",{className:"alert alert-info d-flex align-items-center",children:[i.jsx(l.icon,{className:"me-2",size:20}),i.jsxs("span",{children:["Red social seleccionada: ",i.jsx("strong",{children:l.name})]})]})}),i.jsx(B,{eRef:u,label:"Usuario/Nombre de cuenta",col:"col-12",required:!0}),i.jsx(G,{eRef:p,label:"Enlace (https://...)",col:"col-12",rows:2,required:!0})]})})]})};P((t,o)=>{I(t).render(i.jsx(E,{...o,title:"Redes Sociales",children:i.jsx(ee,{...o})}))});
