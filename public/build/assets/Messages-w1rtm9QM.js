var u=Object.defineProperty;var f=(r,l,s)=>l in r?u(r,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[l]=s;var p=(r,l,s)=>(f(r,typeof l!="symbol"?l+"":l,s),s);import{j as e}from"./FileViewer-DkaHswXt.js";import{r as a}from"./TrackingPixels-B80Lgev0.js";import{c as N}from"./ReactAppend-CY8yKZvG.js";import{B as b}from"./Base-BYX3oziu.js";import{C as g}from"./CreateReactScript-BEktg6JA.js";import{T as v}from"./Table-Dhu2mzRt.js";import{D as x}from"./DxButton-CsjWvhyj.js";import{R as t}from"./ReactAppend-Yu2UtNlL.js";import{B as y}from"./Results-D258VEiO.js";import{M as C}from"./Modal-CJBbhQ-7.js";import{S as R}from"./sweetalert2.all-C96erxsa.js";import"./index-CbrplguO.js";import"./tippy-react.esm-CIcmk6y-.js";/* empty css              */import"./Logout-CHcSRTk-.js";import"./main-D1ujSG59.js";import"./___vite-browser-external_commonjs-proxy-DjIx6Adb.js";import"./index.esm-Duzu12F9.js";import"./axios-B4uVmeYG.js";import"./useTranslation-BOupZ7-X.js";import"./Filter-BZ5YA63n.js";/* empty css               */class T extends y{constructor(){super(...arguments);p(this,"path","admin/messages")}}const m=new T,S=()=>{var d;const r=a.useRef(),l=a.useRef(),[s,h]=a.useState(null),j=async i=>{const{isConfirmed:n}=await R.fire({title:"Eliminar mensaje",text:"¿Estas seguro de eliminar este mensaje?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});!n||!await m.delete(i)||$(r.current).dxDataGrid("instance").refresh()},o=i=>{i.seen||(m.boolean({id:i,field:"seen",value:!0}),$(r.current).dxDataGrid("instance").refresh()),h(i),$(l.current).modal("show")};return e.jsxs(e.Fragment,{children:[e.jsx(v,{gridRef:r,title:"Mensajes",rest:m,toolBar:i=>{i.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(r.current).dxDataGrid("instance").refresh()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"name",caption:"Nombre",cellTemplate:(i,{data:n})=>{t(i,e.jsx("span",{style:{width:"100%",fontWeight:n.seen?"lighter":"bold",cursor:"pointer"},onClick:()=>o(n),children:n.name}))}},{dataField:"email",caption:"Correo"},{dataField:"service.title",caption:"Servicio",cellTemplate:(i,{data:n})=>{var c;t(i,e.jsx("span",{children:((c=n.service)==null?void 0:c.title)||e.jsx("i",{className:"text-muted",children:"- Consulta General -"})}))}},{dataField:"company",caption:"Empresa",cellTemplate:(i,{data:n})=>{t(i,e.jsx("span",{children:n.company||e.jsx("i",{className:"text-muted",children:"-"})}))}},{dataField:"phone",caption:"Teléfono",cellTemplate:(i,{data:n})=>{t(i,e.jsx("span",{children:n.phone||e.jsx("i",{className:"text-muted",children:"-"})}))}},{dataField:"created_at",caption:"Fecha",dataType:"datetime",format:"yyyy-MM-dd HH:mm:ss",sortOrder:"desc"},{dataField:"status",caption:"Estado",dataType:"boolean",cellTemplate:(i,{data:n})=>{n.seen?t(i,e.jsx("span",{className:"badge bg-success rounded-pill",children:"Leído"})):t(i,e.jsx("span",{className:"badge bg-danger rounded-pill",children:"No leído"}))}},{caption:"Acciones",cellTemplate:(i,{data:n})=>{i.append(x({className:"btn btn-xs btn-soft-dark",title:"Ver mensaje",icon:"fa fa-eye",onClick:()=>o(n)})),i.append(x({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>j(n.id)}))},allowFiltering:!1,allowExporting:!1}]}),e.jsx(C,{modalRef:l,title:"Mensaje",hideFooter:!0,children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("p",{children:[e.jsx("b",{children:"Nombre"}),":",e.jsx("span",{className:"ms-1",children:s==null?void 0:s.name})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("p",{children:[e.jsx("b",{children:"Correo"}),":",e.jsx("span",{className:"ms-1",children:(s==null?void 0:s.email)||e.jsx("i",{className:"text-muted",children:"- Sin correo -"})})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("p",{children:[e.jsx("b",{children:"Teléfono"}),":",e.jsx("span",{className:"ms-1",children:(s==null?void 0:s.phone)||e.jsx("i",{className:"text-muted",children:"- Sin teléfono -"})})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("p",{children:[e.jsx("b",{children:"Empresa"}),":",e.jsx("span",{className:"ms-1",children:(s==null?void 0:s.company)||e.jsx("i",{className:"text-muted",children:"- Sin empresa -"})})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("p",{children:[e.jsx("b",{children:"Rubro"}),":",e.jsx("span",{className:"ms-1",children:(s==null?void 0:s.business_sector)||e.jsx("i",{className:"text-muted",children:"- Sin rubro -"})})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("p",{children:[e.jsx("b",{children:"Envíos diarios/mensuales"}),":",e.jsx("span",{className:"ms-1",children:(s==null?void 0:s.daily_shipments)||e.jsx("i",{className:"text-muted",children:"- Sin especificar -"})})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("p",{children:[e.jsx("b",{children:"Ubicación"}),":",e.jsx("span",{className:"ms-1",children:(s==null?void 0:s.location_type)||e.jsx("i",{className:"text-muted",children:"- Sin especificar -"})})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("p",{children:[e.jsx("b",{children:"Servicio"}),":",e.jsx("span",{className:"ms-1",children:((d=s==null?void 0:s.service)==null?void 0:d.title)||e.jsx("i",{className:"text-muted",children:"- Consulta General -"})})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("p",{children:[e.jsx("b",{children:"Mensaje"}),":",e.jsx("span",{className:"ms-1",children:s==null?void 0:s.description})]})})]})})]})};g((r,l)=>{N(r).render(e.jsx(b,{...l,title:"Mensajes",children:e.jsx(S,{...l})}))});
