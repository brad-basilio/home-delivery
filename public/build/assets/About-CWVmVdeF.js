var D=Object.defineProperty;var y=(o,r,s)=>r in o?D(o,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[r]=s;var d=(o,r,s)=>(y(o,typeof r!="symbol"?r+"":r,s),s);import{j as i}from"./FileViewer-DkaHswXt.js";import{B as T}from"./Base-S6_ph39x.js";import{S as E}from"./SwitchFormGroup-COj39dTx.js";import{Q as I}from"./QuillFormGroup-z_DnzjWe.js";import{I as S}from"./ImageFormGroup-BNrhaHkj.js";import{r as n}from"./TrackingPixels-B80Lgev0.js";import{c as B}from"./ReactAppend-CY8yKZvG.js";import{B as C}from"./Results-D258VEiO.js";import{M as G}from"./Modal-Dub2Vndy.js";import{T as N}from"./Table-Dhu2mzRt.js";import{D as A}from"./DxButton-CsjWvhyj.js";import{I as x}from"./InputFormGroup-D8BRpnsJ.js";import{C as M}from"./CreateReactScript-BEktg6JA.js";import{R as h}from"./ReactAppend-Yu2UtNlL.js";import"./tippy-react.esm-CIcmk6y-.js";import"./index-CbrplguO.js";/* empty css              */import"./Logout-CHcSRTk-.js";import"./main-D1ujSG59.js";import"./___vite-browser-external_commonjs-proxy-DjIx6Adb.js";import"./index.esm-Duzu12F9.js";import"./axios-B4uVmeYG.js";import"./useTranslation-BOupZ7-X.js";import"./Filter-BZ5YA63n.js";/* empty css               */class k extends C{constructor(){super(...arguments);d(this,"path","admin/aboutus");d(this,"hasFiles",!0)}}const b=new k,q=()=>{const o=n.useRef(),r=n.useRef(),s=n.useRef(),u=n.useRef(),m=n.useRef(),p=n.useRef(),f=n.useRef(),c=n.useRef(),[g,v]=n.useState(!1),j=e=>{e!=null&&e.id?v(!0):v(!1),s.current.value=(e==null?void 0:e.id)??"",u.current.value=(e==null?void 0:e.correlative)??"",m.current.value=(e==null?void 0:e.name)??"",p.current.value=(e==null?void 0:e.title)??"",f.editor.root.innerHTML=(e==null?void 0:e.description)??"",c.image.src=`/api/aboutus/media/${e==null?void 0:e.image}`,c.current.value=null,$(r.current).modal("show")},w=async e=>{e.preventDefault();const t={id:s.current.value||void 0,correlative:u.current.value,name:m.current.value,title:p.current.value,description:f.current.value},l=new FormData;for(const a in t)t[a]!==void 0&&t[a]!==""&&l.append(a,t[a]);const R=c.current.files[0];R&&l.append("image",R),await b.save(l)&&($(o.current).dxDataGrid("instance").refresh(),$(r.current).modal("hide"))},F=async({id:e,value:t})=>{await b.boolean({id:e,field:"visible",value:t})&&$(o.current).dxDataGrid("instance").refresh()};return i.jsxs(i.Fragment,{children:[i.jsx(N,{gridRef:o,title:"Nosotros",rest:b,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(o.current).dxDataGrid("instance").refresh()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"correlative",caption:"Correlativo",visible:!1},{dataField:"image",caption:"Imagen",width:"80px",allowFiltering:!1,cellTemplate:(e,{data:t})=>{h(e,i.jsx("img",{src:`/api/aboutus/media/${t.image}`,onError:l=>l.target.src="/api/cover/thumbnail/null",style:{width:"60px",height:"40px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"}}))}},{dataField:"name",caption:"Nombre",width:"20%"},{dataField:"title",caption:"Título",width:"40%"},{dataField:"visible",caption:"Visible",dataType:"boolean",width:"10%",cellTemplate:(e,{data:t})=>{$(e).empty(),h(e,i.jsx(E,{checked:t.visible==1,onChange:()=>F({id:t.id,value:!t.visible})}))}},{caption:"Acciones",cellTemplate:(e,{data:t})=>{e.append(A({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>j(t)}))},allowFiltering:!1,allowExporting:!1}]}),i.jsx(G,{modalRef:r,title:g?"Editar Sección":"Agregar Sección",onSubmit:w,size:"lg",children:i.jsxs("div",{className:"row",id:"about-container",children:[i.jsx("input",{ref:s,type:"hidden"}),i.jsx("input",{ref:u,type:"hidden"}),i.jsx(x,{eRef:m,label:"Nombre",col:"col-md-6",required:!0}),i.jsx(x,{eRef:p,label:"Título",col:"col-md-6",required:!0}),i.jsx(S,{eRef:c,label:"Imagen (Opcional)",col:"col-md-12",aspect:16/9,fit:"cover"}),i.jsx(I,{eRef:f,label:"Descripción",col:"col-12"})]})})]})};M((o,r)=>{B(o).render(i.jsx(T,{...r,title:"Nosotros",children:i.jsx(q,{...r})}))});
